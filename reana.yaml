version: 0.9.4
workflow:
  type: serial
  specification:
    steps:
      - name       : rx_tests 
        kerberos   : true
        environment: 'docker.io/acampove/rx_run3:v4.2'
        kubernetes_memory_limit: '2Gi'
        kubernetes_cpu_request : '4'
        commands:
        - |
            export ZFIT_DISABLE_TF_WARNINGS=1
            export PYTHONPATH=/tmp/rx/local:/usr/local/lib/python3.12/site-packages/
            export MPLCONFIGDIR=/tmp/rx/mplt
            pip install --target /tmp/rx/local --no-deps -r requirements.txt

            python -c "import zfit"
            python -c "import dmu"
